let gql,Post;_d29‍.x([["typeDefs",()=>typeDefs],["resolvers",()=>resolvers],["default",()=>_d29‍.o]]);_d29‍.w("apollo-server-express",[["gql",["gql"],function(v){gql=v}]]);_d29‍.w("../../models/post",[["default",["Post"],function(v){Post=v}]]);


       const typeDefs = gql`
  type Query {
    posts: [Post!]!
    post(id: ID!): Post
  }
`;

       const resolvers = {
  Query: {
    posts: async () => {
      const posts = await Post.find({})
        .populate({ path: 'user', select: 'id username'})
        .populate('tags');
      return posts;
    },
    post: async (_root, args) => {
      const id = args.id;
      const post = await Post.findById(id)
      .populate({
        path: 'comments',
        select: '-post',
        populate: { path: 'user tags', select: '-comments -passwordHash' }
      })
      .populate({
        path: 'user',
        select: '-passwordHash'
      })
      .populate('tags');

      return post;
    }
  }
};

_d29‍.d({
  typeDefs,
  resolvers
});